# [4 虚引用](https://www.cnblogs.com/mfrank/p/9837070.html#:~:text=%E8%99%9A%E5%BC%95%E7%94%A8%E6%98%AF%E4%BD%BF%E7%94%A8PhantomReference%E5%88%9B%E5%BB%BA%E7%9A%84%E5%BC%95%E7%94%A8%EF%BC%8C%E8%99%9A%E5%BC%95%E7%94%A8%E4%B9%9F%E7%A7%B0%E4%B8%BA%E5%B9%BD%E7%81%B5%E5%BC%95%E7%94%A8%E6%88%96%E8%80%85%E5%B9%BB%E5%BD%B1%E5%BC%95%E7%94%A8%EF%BC%8C%E6%98%AF%E6%89%80%E6%9C%89%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E4%B8%AD%E6%9C%80%E5%BC%B1%E7%9A%84%E4%B8%80%E4%B8%AA%E3%80%82,%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E6%9C%89%E8%99%9A%E5%BC%95%E7%94%A8%E7%9A%84%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%AE%8C%E5%85%A8%E4%B8%8D%E4%BC%9A%E5%AF%B9%E5%85%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%9E%84%E6%88%90%E5%BD%B1%E5%93%8D%EF%BC%8C%E4%B9%9F%E6%97%A0%E6%B3%95%E9%80%9A%E8%BF%87%E8%99%9A%E5%BC%95%E7%94%A8%E8%8E%B7%E5%BE%97%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B%E3%80%82%20%E8%99%9A%E5%BC%95%E7%94%A8%EF%BC%8C%E6%AD%A3%E5%A6%82%E5%85%B6%E5%90%8D%EF%BC%8C%E5%AF%B9%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1%E8%80%8C%E8%A8%80%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%BC%95%E7%94%A8%E5%BD%A2%E5%90%8C%E8%99%9A%E8%AE%BE%EF%BC%8C%E6%9C%89%E5%92%8C%E6%B2%A1%E6%9C%89%E4%B8%80%E6%A0%B7%E3%80%82)
## 4.1 定义
> 虚引用是使用PhantomReference创建的引用，虚引用也称为幽灵引用或者幻影引用，是所有引用类型中最弱的一个。一个对象是否有虚引用的存在，完全不会对其生命周期构成影响，也无法通过虚引用获得一个对象实例。
## 4.2 虚可达（phantom reachable）对象。
> 如果一个对象与GC Roots之间仅存在虚引用，则称这个对象为`虚可达（phantom reachable）对象`。
- 如果一个对象没有强引用和软引用，对于垃圾回收器而言便是可以被清除的，在清除之前，会调用其finalize方法，如果一个对象已经被调用过finalize方法但是还没有被释放，它就变成了一个虚可达对象。
## 4.3 作用
它的作用在于跟踪垃圾回收过程，在对象被收集器回收时收到一个系统通知。 

当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在垃圾回收后，将这个虚引用加入引用队列，在其关联的虚引用出队前，不会彻底销毁该对象。 

所以可以通过检查引用队列中是否有相应的虚引用来判断对象是否已经被回收了。